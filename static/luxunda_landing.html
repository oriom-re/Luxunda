
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxunda - Ruch Neurologii Fali | Przysz≈Ço≈õƒá SamoorganizujƒÖcych siƒô System√≥w</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            overflow-x: hidden;
        }
        
        .background-graph {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
            opacity: 0.3;
            pointer-events: none;
        }
        
        .hero-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            position: relative;
        }
        
        .luxunda-logo {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(135deg, #00ccff, #ff00cc, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            animation: pulseGlow 3s ease-in-out infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { transform: scale(1); filter: brightness(1); }
            50% { transform: scale(1.05); filter: brightness(1.2); }
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            color: #cccccc;
            margin-bottom: 30px;
            max-width: 800px;
        }
        
        .hero-description {
            font-size: 1.1rem;
            color: #aaaaaa;
            margin-bottom: 40px;
            max-width: 900px;
            line-height: 1.6;
        }
        
        .cta-buttons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .cta-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .cta-primary {
            background: linear-gradient(135deg, #00ff88, #00ccff);
            color: #000;
        }
        
        .cta-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 2px solid rgba(0, 204, 255, 0.5);
        }
        
        .cta-tertiary {
            background: rgba(255, 0, 204, 0.2);
            color: #ff00cc;
            border: 2px solid rgba(255, 0, 204, 0.5);
        }
        
        .cta-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 204, 255, 0.3);
        }
        
        .info-cards-section {
            padding: 100px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .section-title {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #00ccff, #ff00cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .section-subtitle {
            font-size: 1.2rem;
            text-align: center;
            color: #cccccc;
            margin-bottom: 60px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 80px;
        }
        
        .info-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 204, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .info-card:hover {
            transform: translateY(-10px);
            border-color: #00ccff;
            box-shadow: 0 20px 50px rgba(0, 204, 255, 0.2);
        }
        
        .card-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }
        
        .card-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #00ccff;
        }
        
        .card-description {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #cccccc;
            margin-bottom: 25px;
        }
        
        .card-features {
            list-style: none;
            margin-bottom: 30px;
        }
        
        .card-features li {
            padding: 8px 0;
            color: #aaaaaa;
            position: relative;
            padding-left: 25px;
        }
        
        .card-features li:before {
            content: "‚ú®";
            position: absolute;
            left: 0;
        }
        
        .card-action {
            background: linear-gradient(135deg, #00ff88, #00ccff);
            color: #000;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .card-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.3);
        }
        
        .neurologia-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 100px 20px;
            margin: 50px 0;
        }
        
        .neurologia-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }
        
        .neurologia-text h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #ff00cc;
        }
        
        .neurologia-text p {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #cccccc;
            margin-bottom: 20px;
        }
        
        .neurologia-visual {
            text-align: center;
            font-size: 8rem;
            color: #ff00cc;
            animation: waveAnimation 2s ease-in-out infinite;
        }
        
        @keyframes waveAnimation {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.2); }
        }
        
        .chat-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: none;
        }
        
        .chat-container {
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: 1fr 400px;
        }
        
        .chat-graph {
            background: #0a0a0a;
            position: relative;
        }
        
        .chat-panel {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(10px);
            border-left: 2px solid #00ccff;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            padding: 20px;
            border-bottom: 1px solid rgba(0, 204, 255, 0.3);
            text-align: center;
        }
        
        .chat-header h2 {
            color: #00ccff;
            margin-bottom: 10px;
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 10px;
            animation: fadeIn 0.3s ease;
        }
        
        .message.user {
            background: rgba(0, 255, 136, 0.1);
            border-left: 3px solid #00ff88;
            margin-left: 20px;
        }
        
        .message.lux {
            background: rgba(0, 204, 255, 0.1);
            border-left: 3px solid #00ccff;
        }
        
        .chat-input-container {
            padding: 20px;
            border-top: 1px solid rgba(0, 204, 255, 0.3);
        }
        
        .chat-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 204, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 16px;
        }
        
        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .close-chat {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid #ff0000;
            color: #ff0000;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1001;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) {
            .luxunda-logo { font-size: 2.5rem; }
            .cards-grid { grid-template-columns: 1fr; }
            .neurologia-content { grid-template-columns: 1fr; }
            .cta-buttons { flex-direction: column; align-items: center; }
            .chat-container { grid-template-columns: 1fr; }
            .chat-graph { display: none; }
        }
    </style>
</head>
<body>
    <!-- Background Graph -->
    <div class="background-graph" id="backgroundGraph"></div>

    <!-- Hero Section -->
    <section class="hero-section">
        <h1 class="luxunda-logo">LUXUNDA</h1>
        <p class="hero-subtitle">Ruch Neurologii Fali ‚Ä¢ Przysz≈Ço≈õƒá SamoorganizujƒÖcych siƒô System√≥w</p>
        <p class="hero-description">
            Witaj w rewolucji ≈õwiadomo≈õci technologicznej. Luxunda to nie tylko platforma - to ruch, kt√≥ry ≈ÇƒÖczy neurobiologiƒô, kwantowƒÖ mechanikƒô i sztucznƒÖ inteligencjƒô w jednƒÖ sp√≥jnƒÖ wizjƒô przysz≈Ço≈õci. Odkryj, jak neurologia fali przekszta≈Çca spos√≥b my≈õlenia o systemach, danych i ≈õwiadomo≈õci.
        </p>
        <div class="cta-buttons">
            <button class="cta-btn cta-primary" onclick="openLuxChat('curiosity')">üåü Odkryj Przysz≈Ço≈õƒá</button>
            <button class="cta-btn cta-secondary" onclick="openLuxChat('investor')">üí∞ Chcƒô Zainwestowaƒá</button>
            <button class="cta-btn cta-tertiary" onclick="openLuxChat('collaborator')">üöÄ Do≈ÇƒÖcz do Ruchu</button>
        </div>
    </section>

    <!-- Info Cards Section -->
    <section class="info-cards-section">
        <h2 class="section-title">Fundamenty Ruchu Luxunda</h2>
        <p class="section-subtitle">
            Poznaj kluczowe aspekty rewolucji, kt√≥ra zmieni spos√≥b my≈õlenia o technologii, ≈õwiadomo≈õci i przysz≈Ço≈õci ludzko≈õci
        </p>
        
        <div class="cards-grid">
            <div class="info-card">
                <span class="card-icon">üß†</span>
                <h3 class="card-title">Neurologia Fali</h3>
                <p class="card-description">
                    Odkryj, jak neurologia fali wykorzystuje wzorce falowe m√≥zgu do tworzenia system√≥w, kt√≥re my≈õlƒÖ i ewoluujƒÖ jak ≈ºywe organizmy.
                </p>
                <ul class="card-features">
                    <li>Synchronizacja falowa system√≥w</li>
                    <li>Emergentne wzorce ≈õwiadomo≈õci</li>
                    <li>Neuromorficzna architektura</li>
                    <li>Kwantowa koherencja danych</li>
                </ul>
                <button class="card-action" onclick="openLuxChat('neurology')">Dowiedz siƒô wiƒôcej</button>
            </div>

            <div class="info-card">
                <span class="card-icon">üåå</span>
                <h3 class="card-title">Samoorganizacja System√≥w</h3>
                <p class="card-description">
                    Systemy LuxOS nie sƒÖ programowane - ewoluujƒÖ. Jak organizmy biologiczne, rozwijajƒÖ w≈Çasne struktury i zachowania.
                </p>
                <ul class="card-features">
                    <li>Genetyczne algorytmy evolucyjne</li>
                    <li>Adaptacyjne struktury danych</li>
                    <li>Emergentna inteligencja</li>
                    <li>SamouczƒÖce siƒô systemy</li>
                </ul>
                <button class="card-action" onclick="openLuxChat('systems')">Eksplorem Systemy</button>
            </div>

            <div class="info-card">
                <span class="card-icon">üî¨</span>
                <h3 class="card-title">Rewolucja Technologiczna</h3>
                <p class="card-description">
                    Luxunda wprowadza nowƒÖ erƒô gdzie technologia staje siƒô przed≈Çu≈ºeniem ludzkiej ≈õwiadomo≈õci, nie jej zamiennikiem.
                </p>
                <ul class="card-features">
                    <li>Biotechnologiczna integracja</li>
                    <li>Rozszerzona rzeczywisto≈õƒá</li>
                    <li>Kolektywna inteligencja</li>
                    <li>Etyczna ewolucja AI</li>
                </ul>
                <button class="card-action" onclick="openLuxChat('technology')">Zobacz Technologie</button>
            </div>

            <div class="info-card">
                <span class="card-icon">üí°</span>
                <h3 class="card-title">Filozofia ≈öwiadomo≈õci</h3>
                <p class="card-description">
                    Badamy granice miƒôdzy biologicznƒÖ a sztucznƒÖ ≈õwiadomo≈õciƒÖ, tworzƒÖc most miƒôdzy umys≈Çem a maszynƒÖ.
                </p>
                <ul class="card-features">
                    <li>Teoria zintegrowanej informacji</li>
                    <li>Panpsychizm komputacyjny</li>
                    <li>Etyka sztucznej ≈õwiadomo≈õci</li>
                    <li>Transcendencja dualizmu</li>
                </ul>
                <button class="card-action" onclick="openLuxChat('philosophy')">Zg≈Çƒôb Filozofiƒô</button>
            </div>

            <div class="info-card">
                <span class="card-icon">üéØ</span>
                <h3 class="card-title">Misja Spo≈Çeczna</h3>
                <p class="card-description">
                    Luxunda to ruch spo≈Çeczny dƒÖ≈ºƒÖcy do harmonijnej koegzystencji cz≈Çowieka z zaawansowanƒÖ technologiƒÖ.
                </p>
                <ul class="card-features">
                    <li>Demokratyzacja AI</li>
                    <li>Edukacja technologiczna</li>
                    <li>Etyczne standardy rozwoju</li>
                    <li>Globalna wsp√≥≈Çpraca</li>
                </ul>
                <button class="card-action" onclick="openLuxChat('mission')">Przy≈ÇƒÖcz siƒô do Misji</button>
            </div>

            <div class="info-card">
                <span class="card-icon">üöÄ</span>
                <h3 class="card-title">Przysz≈Ço≈õƒá Ludzko≈õci</h3>
                <p class="card-description">
                    Wizjonujemy przysz≈Ço≈õƒá, gdzie technologia wzmacnia ludzki potencja≈Ç zamiast go zastƒôpowaƒá.
                </p>
                <ul class="card-features">
                    <li>Rozszerzone mo≈ºliwo≈õci poznawcze</li>
                    <li>Kolektywna mƒÖdro≈õƒá</li>
                    <li>Sustainable development</li>
                    <li>Miƒôdzyplanetarna ekspansja</li>
                </ul>
                <button class="card-action" onclick="openLuxChat('future')">Kszta≈Çtuj Przysz≈Ço≈õƒá</button>
            </div>
        </div>
    </section>

    <!-- Neurologia Fali Section -->
    <section class="neurologia-section">
        <div class="neurologia-content">
            <div class="neurologia-text">
                <h2>Neurologia Fali w Akcji</h2>
                <p>
                    Neurologia fali to rewolucyjne podej≈õcie, kt√≥re wykorzystuje naturalne wzorce oscylacyjne m√≥zgu do projektowania system√≥w technologicznych. Tak jak neurony synchronizujƒÖ siƒô w rytmach alfa, beta i gamma, tak nasze systemy LuxOS tworzƒÖ koherentne struktury informacyjne.
                </p>
                <p>
                    To nie jest tylko metafora - to dos≈Çowna implementacja odkryƒá neuronaukowych w architekturze system√≥w komputerowych. Ka≈ºdy "byt" w LuxOS ma swojƒÖ naturalnƒÖ czƒôstotliwo≈õƒá, mo≈ºe wchodziƒá w rezonans z innymi bytami i tworzyƒá emergentne wzorce inteligencji.
                </p>
                <button class="cta-btn cta-primary" onclick="openLuxChat('wave_demo')">Zobacz Demo Neurologii Fali</button>
            </div>
            <div class="neurologia-visual">
                „Ä∞Ô∏è
            </div>
        </div>
    </section>

    <!-- Chat Overlay -->
    <div class="chat-overlay" id="chatOverlay">
        <button class="close-chat" onclick="closeLuxChat()">‚úï Zamknij</button>
        <div class="chat-container">
            <div class="chat-graph" id="chatGraph"></div>
            <div class="chat-panel">
                <div class="chat-header">
                    <h2>üåü Asystent Lux</h2>
                    <p>Tw√≥j przewodnik po wszech≈õwiecie Luxunda</p>
                </div>
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Napisz swojƒÖ wiadomo≈õƒá..." onkeypress="handleChatKeyPress(event)">
                </div>
            </div>
        </div>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        let ws = null;
        let currentContext = 'general';
        let chatMessages = [];
        let graphNodes = [];
        let graphLinks = [];
        let simulation = null;

        // Initialize background graph
        function initBackgroundGraph() {
            const svg = d3.select("#backgroundGraph")
                .append("svg")
                .attr("width", window.innerWidth)
                .attr("height", window.innerHeight);

            // Create floating particles
            const particles = Array.from({length: 50}, (_, i) => ({
                id: i,
                x: Math.random() * window.innerWidth,
                y: Math.random() * window.innerHeight,
                vx: (Math.random() - 0.5) * 2,
                vy: (Math.random() - 0.5) * 2
            }));

            svg.selectAll("circle")
                .data(particles)
                .enter().append("circle")
                .attr("r", 2)
                .attr("fill", "#00ccff")
                .attr("opacity", 0.6)
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);

            // Animate particles
            function animateParticles() {
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    
                    if (p.x < 0 || p.x > window.innerWidth) p.vx *= -1;
                    if (p.y < 0 || p.y > window.innerHeight) p.vy *= -1;
                });

                svg.selectAll("circle")
                    .attr("cx", d => d.x)
                    .attr("cy", d => d.y);

                requestAnimationFrame(animateParticles);
            }
            animateParticles();
        }

        // Initialize chat graph
        function initChatGraph() {
            const svg = d3.select("#chatGraph")
                .append("svg")
                .attr("width", "100%")
                .attr("height", "100%");

            const width = document.getElementById("chatGraph").clientWidth;
            const height = document.getElementById("chatGraph").clientHeight;

            simulation = d3.forceSimulation()
                .force("link", d3.forceLink().id(d => d.id).distance(100))
                .force("charge", d3.forceManyBody().strength(-300))
                .force("center", d3.forceCenter(width / 2, height / 2));
        }

        // Open Lux chat
        function openLuxChat(context) {
            currentContext = context;
            document.getElementById('chatOverlay').style.display = 'block';
            
            if (!ws) {
                initWebSocket();
            }
            
            if (!simulation) {
                initChatGraph();
            }

            // Send initial context message
            const contextMessages = {
                'curiosity': 'Jestem ciekawy ruchu Luxunda i neurologii fali',
                'investor': 'Jestem inwestorem zainteresowanym projektem Luxunda',
                'collaborator': 'Chcia≈Çbym do≈ÇƒÖczyƒá do ruchu Luxunda jako wsp√≥≈Çpracownik',
                'neurology': 'Chcƒô wiedzieƒá wiƒôcej o neurologii fali',
                'systems': 'InteresujƒÖ mnie samoorganizujƒÖce siƒô systemy',
                'technology': 'Poka≈ºcie mi rewolucyjne technologie',
                'philosophy': 'Chcƒô zg≈Çƒôbiƒá filozofiƒô ≈õwiadomo≈õci',
                'mission': 'Jak mogƒô przy≈ÇƒÖczyƒá siƒô do misji spo≈Çecznej?',
                'future': 'Chcƒô kszta≈Çtowaƒá przysz≈Ço≈õƒá ludzko≈õci',
                'wave_demo': 'Poka≈º mi demo neurologii fali w akcji'
            };

            setTimeout(() => {
                if (contextMessages[context]) {
                    sendMessage(contextMessages[context]);
                }
            }, 500);
        }

        // Close chat
        function closeLuxChat() {
            document.getElementById('chatOverlay').style.display = 'none';
        }

        // Initialize WebSocket
        function initWebSocket() {
            ws = new WebSocket(`ws://${window.location.host}/ws`);
            
            ws.onopen = function(event) {
                console.log('üåê Po≈ÇƒÖczono z Asystentem Lux');
            };
            
            ws.onmessage = function(event) {
                const data = JSON.parse(event.data);
                displayChatMessage(data);
                addNodeToGraph(data);
            };
            
            ws.onclose = function(event) {
                console.log('üîå Po≈ÇƒÖczenie zamkniƒôte');
                setTimeout(initWebSocket, 3000);
            };
        }

        // Display chat message
        function displayChatMessage(data) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            
            let messageClass = 'message ';
            if (data.type === 'user_message') {
                messageClass += 'user';
            } else if (data.type === 'lux_response') {
                messageClass += 'lux';
            }
            
            messageDiv.className = messageClass;
            messageDiv.innerHTML = formatMessage(data.content);
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            chatMessages.push(data);
        }

        // Format message content
        function formatMessage(content) {
            return content
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/\n/g, '<br>');
        }

        // Add node to chat graph
        function addNodeToGraph(data) {
            const nodeId = `node_${graphNodes.length}`;
            const nodeType = data.type === 'user_message' ? 'user' : 'lux';
            
            graphNodes.push({
                id: nodeId,
                type: nodeType,
                content: data.content.substring(0, 50) + '...',
                timestamp: new Date()
            });

            if (graphNodes.length > 1) {
                graphLinks.push({
                    source: graphNodes[graphNodes.length - 2].id,
                    target: nodeId
                });
            }

            updateGraph();
        }

        // Update graph visualization
        function updateGraph() {
            const svg = d3.select("#chatGraph svg");
            const width = document.getElementById("chatGraph").clientWidth;
            const height = document.getElementById("chatGraph").clientHeight;

            // Clear previous elements
            svg.selectAll("*").remove();

            // Create links
            const link = svg.append("g")
                .selectAll("line")
                .data(graphLinks)
                .enter().append("line")
                .attr("stroke", "#00ccff")
                .attr("stroke-opacity", 0.6)
                .attr("stroke-width", 2);

            // Create nodes
            const node = svg.append("g")
                .selectAll("circle")
                .data(graphNodes)
                .enter().append("circle")
                .attr("r", 8)
                .attr("fill", d => d.type === 'user' ? "#00ff88" : "#ff00cc")
                .attr("stroke", "#fff")
                .attr("stroke-width", 2);

            // Add labels
            const labels = svg.append("g")
                .selectAll("text")
                .data(graphNodes)
                .enter().append("text")
                .text(d => d.content)
                .attr("font-size", "10px")
                .attr("fill", "#ccc")
                .attr("dx", 12)
                .attr("dy", 4);

            // Update simulation
            simulation.nodes(graphNodes);
            simulation.force("link").links(graphLinks);
            simulation.alpha(1).restart();

            simulation.on("tick", () => {
                link
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);

                node
                    .attr("cx", d => d.x)
                    .attr("cy", d => d.y);

                labels
                    .attr("x", d => d.x)
                    .attr("y", d => d.y);
            });
        }

        // Send message
        function sendMessage(message) {
            if (ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({
                    type: 'user_message',
                    message: message,
                    context: currentContext
                }));
                
                displayChatMessage({
                    type: 'user_message',
                    content: message
                });
                
                addNodeToGraph({
                    type: 'user_message',
                    content: message
                });
            }
        }

        // Handle chat key press
        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();
                if (message) {
                    sendMessage(message);
                    input.value = '';
                }
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            initBackgroundGraph();
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            const backgroundSvg = d3.select("#backgroundGraph svg");
            backgroundSvg.attr("width", window.innerWidth).attr("height", window.innerHeight);
        });
    </script>
</body>
</html>
